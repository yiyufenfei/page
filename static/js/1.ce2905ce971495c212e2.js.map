{"version":3,"sources":["webpack:///./node_modules/core-js/library/fn/object/define-property.js","webpack:///./node_modules/babel-runtime/core-js/object/define-property.js","webpack:///./node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///./src/components/tab/download.js","webpack:///src/components/tab/index.vue","webpack:///./src/components/tab/index.vue?e130","webpack:///./src/components/tab/index.vue","webpack:///./node_modules/babel-runtime/helpers/createClass.js"],"names":["__webpack_require__","$Object","Object","module","exports","it","key","desc","defineProperty","default","__esModule","instance","Constructor","TypeError","$export","S","F","f","Download","fileName","content","console","log","aLink","document","createElement","blob","this","base64ToBlob","createEvent","initEvent","download","href","URL","createObjectURL","dispatchEvent","MouseEvent","bubbles","cancelable","view","window","code","contentType","split","raw","atob","rawLength","length","uInt8Array","Uint8Array","i","charCodeAt","Blob","type","tab","name","data","downloads","download_Download","imgSrc","components","created","_this","sessionStorage","getItem","FormData","append","show","$api","post","r","$message","error","message","addEventListener","onPlusReady","methods","savePic","Url","url","a","replace","e","revokeObjectURL","baseImg","dataurl","arr","mime","match","bstr","n","u8arr","saveImage","downbtn","cover","plusready","plus","gallery","save","nativeUI","alert","openclick","$router","push","path","components_tab","render","_h","$createElement","_c","_self","staticClass","attrs","src","_v","color","on","click","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","obj","_defineProperty","_defineProperty2","defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","prototype"],"mappings":"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","file":"static/js/1.ce2905ce971495c212e2.js","sourcesContent":["require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/define-property.js\n// module id = 9bBU\n// module chunks = 0 1","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/define-property.js\n// module id = C4MV\n// module chunks = 0 1","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/classCallCheck.js\n// module id = Zrlr\n// module chunks = 1","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.define-property.js\n// module id = mClu\n// module chunks = 0 1","class Download {\r\n    //对外暴露下载接口。\r\n    downloadFile(fileName, content) {\r\n        console.log(fileName)\r\n        console.log(content)\r\n        let aLink = document.createElement('a');\r\n        let blob = this.base64ToBlob(content); //new Blob([content]);\r\n\r\n        let evt = document.createEvent(\"HTMLEvents\");\r\n        evt.initEvent(\"click\", true, true);//initEvent 不加后两个参数在FF下会报错  事件类型，是否冒泡，是否阻止浏览器的默认行为\r\n        aLink.download = fileName;\r\n        aLink.href = URL.createObjectURL(blob);\r\n        aLink.dispatchEvent(new MouseEvent('click', { bubbles: true, cancelable: true, view: window }));//兼容火狐\r\n    }\r\n\r\n    base64ToBlob(code) {\r\n        let contentType = code.split(':')[1];\r\n        let raw = window.atob(code);\r\n        let rawLength = raw.length;\r\n        let uInt8Array = new Uint8Array(rawLength);\r\n        for (let i = 0; i < rawLength; ++i) {\r\n            uInt8Array[i] = raw.charCodeAt(i);\r\n        }\r\n        return new Blob([uInt8Array], { type: contentType });\r\n    }\r\n}\r\nexport { Download };\n\n\n// WEBPACK FOOTER //\n// ./src/components/tab/download.js","<template>\r\n  <div>\r\n    <!--<el-input type=\"text\" v-model=\"imgSrc\" />-->\r\n    <div class=\"IDimg\">\r\n      <img :src=\"imgSrc\" />\r\n    </div>\r\n    <div class=\"buttons\">\r\n      <div>\r\n        <van-button color=\"#1989fa\" @click=\"openclick\">Take Photo</van-button>\r\n      </div>\r\n      <div>\r\n        <!-- icon=\"down\" -->\r\n        <van-button color=\"#1989fa\" @click=\"downbtn\">Save to Gallery</van-button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- <a :href=\"imgSrc\" download>下载</a> -->\r\n    <!-- {{imgSrc}} -->\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Download } from \"./download\"; //文件下载\r\nexport default {\r\n  name: \"XXX\",\r\n  data() {\r\n    return {\r\n      downloads: new Download(),\r\n      // imgSrc:\r\n      //   \"https://img2.baidu.com/it/u=3735799021,1953155234&fm=253&fmt=auto&app=138&f=JPEG?w=485&h=730\"\r\n      imgSrc: \"\"\r\n    };\r\n  },\r\n  components: {},\r\n  created() {\r\n    if (sessionStorage.getItem(\"imgSrc\")) {\r\n      this.imgSrc = sessionStorage.getItem(\"imgSrc\");\r\n\r\n      var data = new FormData();\r\n      data.append(\"file\", this.imgSrc);\r\n      data.append(\"type\", \"animal\");\r\n      this.show = true;\r\n      this.$api.post(\r\n        \"http://www.yclyhyl.com:8086/api/hrsl/zwsb/classify\",\r\n        data,\r\n        r => {\r\n          console.log(\"返回结果\");\r\n          console.log(r);\r\n        },\r\n\r\n        f => {\r\n          this.$message.error(f.message);\r\n        }\r\n      );\r\n    }\r\n\r\n    document.addEventListener(\"plusready\", this.onPlusReady, false);\r\n    // console.log(window);\r\n    // console.log(\"window\");\r\n    // if (window.plus) {\r\n    //   this.plusReady();\r\n    // } else {\r\n    //   document.addEventListener(\"plusready\", this.plusReady, false);\r\n    // }\r\n  },\r\n  methods: {\r\n    savePic(Url) {\r\n      console.log(Url);\r\n      // Url = this.dialogImgUrl; //图片路径，也可以传值进来\r\n      var triggerEvent = \"touchstart\"; //指定下载方式\r\n      var blob = new Blob([\"\"], { type: \"application/octet-stream\" }); //二进制大型对象blob\r\n      var url = URL.createObjectURL(blob); //创建一个字符串路径空位\r\n      var a = document.createElement(\"a\"); //创建一个 a 标签\r\n      a.href = Url; //把路径赋到a标签的href上\r\n      //正则表达式，这里是把图片文件名分离出来。拿到文件名赋到a.download,作为文件名来使用文本\r\n      a.download = Url.replace(/(.*\\/)*([^.]+.*)/gi, \"$2\").split(\"?\")[0];\r\n      /* var e = document.createEvent('MouseEvents');  //创建事件（MouseEvents鼠标事件）\r\n\t    e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null); //初始化鼠标事件（initMouseEvent已弃用）*/\r\n\r\n      //代替方法。创建鼠标事件并初始化（后面这些参数我也不清楚，参考文档吧 https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/MouseEvent）\r\n      var e = new MouseEvent(\r\n        \"click\",\r\n        (true,\r\n        false,\r\n        window,\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        false,\r\n        false,\r\n        false,\r\n        false,\r\n        0,\r\n        null)\r\n      );\r\n      //派遣后，它将不再执行任何操作。执行保存到本地\r\n      a.dispatchEvent(e);\r\n      //释放一个已经存在的路径（有创建createObjectURL就要释放revokeObjectURL）\r\n      URL.revokeObjectURL(url);\r\n      /* \r\n\t\t//这段好像并不影响，所以我不用，注释掉\r\n\t\tvar imgs = document.getElementsByTagName(\"img\");\r\n\t\tfor(var i = 0,o;o = imgs[i];i++){\r\n\t\t\t\r\n\t\t\to.addEventListener(triggerEvent,function(){\r\n\t\t\t\tvar newurl = this.getAttribute(\"src\");\r\n\t\t\t\tsaveAs(newurl);\r\n\t\t\t},false);\r\n\t\t} */\r\n    },\r\n    baseImg(dataurl) {\r\n      var arr = dataurl.split(\",\"),\r\n        mime = arr[0].match(/:(.*?);/)[1],\r\n        bstr = atob(arr[1]),\r\n        n = bstr.length,\r\n        u8arr = new Uint8Array(n);\r\n      while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n      }\r\n      return new Blob([u8arr], { type: mime });\r\n    },\r\n\r\n    onPlusReady() {\r\n      // 扩展API加载完毕，现在可以正常调用扩展API\r\n      // ......\r\n      this.saveImage(this.baseImg(this.imgSrc));\r\n    },\r\n    downbtn() {\r\n      // let obj = {\r\n      //   content: this.imgSrc,\r\n      //   fileName: \"IDcard\"\r\n      // };\r\n      // this.downLoad(obj);\r\n      console.log(\"jpg图片\");\r\n      console.log(this.baseImg(this.imgSrc));\r\n      this.saveImage(this.baseImg(this.imgSrc));\r\n    },\r\n    saveImage(cover) {\r\n      console.log(document.plusready);\r\n      if (!window.plus) return;\r\n      plus.gallery.save(\r\n        cover,\r\n        function() {\r\n          plus.nativeUI.alert(\"保存图片到相册成功\");\r\n        },\r\n        function() {\r\n          plus.nativeUI.alert(\"保存失败\");\r\n        }\r\n      );\r\n    },\r\n    openclick() {\r\n      this.$router.push({ path: \"/Competence\" });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.IDimg {\r\n  width: 200px;\r\n  height: 300px;\r\n  margin: 0 auto;\r\n  border: solid 1px red;\r\n  transform: rotate(-90deg);\r\n}\r\n.IDimg img {\r\n  height: 100%;\r\n  display: block;\r\n  float: left;\r\n  position: relative;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n}\r\n.buttons {\r\n  clear: both;\r\n  width: 70%;\r\n  overflow: hidden;\r\n  margin: 0 auto;\r\n  margin-top: 30px;\r\n}\r\n\r\n.buttons > div:nth-child(1) {\r\n  float: left;\r\n}\r\n.buttons > div:nth-child(2) {\r\n  float: right;\r\n}\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/tab/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"IDimg\"},[_c('img',{attrs:{\"src\":_vm.imgSrc}})]),_vm._v(\" \"),_c('div',{staticClass:\"buttons\"},[_c('div',[_c('van-button',{attrs:{\"color\":\"#1989fa\"},on:{\"click\":_vm.openclick}},[_vm._v(\"Take Photo\")])],1),_vm._v(\" \"),_c('div',[_c('van-button',{attrs:{\"color\":\"#1989fa\"},on:{\"click\":_vm.downbtn}},[_vm._v(\"Save to Gallery\")])],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-57868c63\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tab/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-57868c63\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-57868c63\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tab/index.vue\n// module id = null\n// module chunks = ","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/createClass.js\n// module id = wxAW\n// module chunks = 1"],"sourceRoot":""}